<html>
  <head>
    <title>highest number</title>
    <style>
      .highlight {
        background-color: red;
      }
    </style>
    <script>
      const delayedPrompt = (cb) => {
        setTimeout(() => {
          const number = prompt("Enter a number");
          cb(parseInt(number));
        }, 100);
      };

      const getContainerElement = () => document.querySelector("#container ul");

      const createNumberElement = (number) => {
        const numberElement = document.createElement("li");
        numberElement.innerText = number;

        return numberElement;
      };

      const addToNumbers = (numberElement) => {
        const containerElement = getContainerElement();
        containerElement.appendChild(numberElement);
      };

      const decideMaxNumberElement = (previousElement, currentElement) => {
        const previousNumber = parseInt(previousElement.innerText);
        const currentNumber = parseInt(currentElement.innerText);

        return previousNumber < currentNumber
          ? currentElement
          : previousElement;
      };

      const determineHighestNumberAndHighlight = (numberElements) => {
        const maxNumberElement = numberElements.reduce(decideMaxNumberElement);
        maxNumberElement.classList.add("highlight");
      };

      const highlightHighestNumber = ([...numberElements]) => {
        delayedPrompt((number) => {
          const number = createNumberElement(number);
          addToNumbers(number);

          if (numberElements.length === 9) {
            determineHighestNumberAndHighlight(numberElements);
            return;
          }

          highlightHighestNumber([...numberElements, number]);
        });
      };

      const main = () => {
        const numberElements = [];
        highlightHighestNumber(numberElements);
      };

      window.onload = main;
    </script>
  </head>
  <body>
    <section id="page">
      <header>Highlight the highest number</header>
      <main id="container">
        <ul></ul>
      </main>
    </section>
  </body>
</html>
