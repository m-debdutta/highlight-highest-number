<html>
  <head>
    <title>highest number</title>
    <style>
      .highlight {
        background-color: red;
      }
    </style>
    <script>
      const delayedPrompt = (cb) => {
        setTimeout(() => {
          const number = prompt("Enter a number");
          cb(Number(number));
        }, 100);
      };

      const getContainerElement = () => document.querySelector("#container ul");

      const createNumberElement = (number) => {
        const numberElement = document.createElement("li");
        numberElement.innerText = number;

        return numberElement;
      };

      const addNumberToRenderList = (number) => {
        const containerElement = getContainerElement();
        const numberElement = createNumberElement(number);
        containerElement.appendChild(numberElement);
      };

      const determineHighlightNumberAndHighlight = (numbers) => {
        const maxNumber = Math.max(...numbers);
        const indexOfMaxNumber = numbers.indexOf(maxNumber);
              
        const containerElement = getContainerElement();
        const elementToHighlight = containerElement.childNodes[indexOfMaxNumber];
        
        elementToHighlight.classList.add("highlight");
      };

      const highlightHighestNumber = ([...numbers]) => {
        delayedPrompt((number) => {
          addNumberToRenderList(number);

          if (numbers.length === 9) {
            determineHighlightNumberAndHighlight(numbers);
            return;
          }

          highlightHighestNumber([...numbers, number]);
        });
      };

      const main = () => {
        const numbers = [];
        highlightHighestNumber(numbers);
      };

      window.onload = main;
    </script>
  </head>
  <body>
    <section id="page">
      <header>Highlight the highest number</header>
      <main id="container">
        <ul></ul>
      </main>
    </section>
  </body>
</html>
