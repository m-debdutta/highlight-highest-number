<html>
  <head>
    <title>highest number</title>
    <style>
      .highlight {
        background-color: red;
      }
    </style>
    <script>
      const delayedPrompt = (cb) => {
        setTimeout(() => {
          const number = prompt("Enter a number");
          cb(Number(number));
        }, 100);
      };

      const getContainerElement = () => document.querySelector("#container ul");

      const createNumberElement = (number) => {
        const numberElement = document.createElement("li");
        numberElement.innerText = number;
        numberElement.classList.add("number" + number);

        return numberElement;
      };

      const addNumberToRenderList = (number) => {
        const containerElement = getContainerElement();
        const numberElement = createNumberElement(number);
        containerElement.appendChild(numberElement);
      };

      const generateClassName = (maxNumber) => ".number" + maxNumber.toString()

      const endOfInputs = (numbers) => {
        const maxNumber = Math.max(...numbers);
        const className = generateClassName(maxNumber);
        
        const elementToHighlight = document.querySelector(className);
        elementToHighlight.classList.add("highlight");
      };

      const main = ([...numbers]) => {
        delayedPrompt((number) => {
          addNumberToRenderList(number);

          if (numbers.length === 9) {
            endOfInputs(numbers);
            return;
          }

          main([...numbers, number]);
        });
      };

      window.onload = () => {
        const numbers = [];
        main(numbers);
      };
    </script>
  </head>
  <body>
    <section id="page">
      <header>Highlight the highest number</header>
      <main id="container">
        <ul></ul>
      </main>
    </section>
  </body>
</html>
